# Chi-Square Goodness-of-Fit Calculator

一个功能完整的Python卡方拟合优度计算器，用于检验观察频数是否符合期望频数分布。

## 功能特点

- ✅ 计算卡方统计量
- ✅ 计算自由度
- ✅ 计算p值（使用Wilson-Hilferty近似）
- ✅ 支持等比例期望分布
- ✅ 支持自定义期望频数
- ✅ 支持自定义期望比例
- ✅ 数据输入验证
- ✅ 命令行界面
- ✅ 示例演示
- ✅ **新增：支持零期望频数的特殊处理**

## 安装要求

- Python 3.6+
- 无额外依赖（仅使用标准库）

## 使用方法

### 1. 运行示例

```bash
python chi_square_calculator.py
```

这将运行三个预设的示例：

- 骰子公平性检验
- 遗传比例检验（3:1比例）
- 自定义期望频数检验

### 2. 命令行参数

#### 等比例期望分布

```bash
python chi_square_calculator.py -o 10 15 20 25
```

#### 指定期望频数

```bash
python chi_square_calculator.py -o 10 15 20 25 -e 12 14 18 26
```

#### 指定期望比例

```bash
python chi_square_calculator.py -o 45 55 -p 0.5 0.5
```

#### 自定义显著性水平

```bash
python chi_square_calculator.py -o 20 30 25 15 -a 0.01
```

### 3. 参数说明

- `-o, --observed`: 观察频数（必需）
- `-e, --expected`: 期望频数（可选）
- `-p, --proportions`: 期望比例（可选，必须和为1.0）
- `-a, --alpha`: 显著性水平（可选，默认0.05）

## 输出解释

计算器会输出：

- 卡方统计量
- 自由度
- p值
- 显著性水平
- 检验结论（拒绝或接受原假设）
- 观察频数与期望频数对比表

## 数学原理

### 卡方统计量计算

χ² = Σ[(观察频数 - 期望频数)² / 期望频数]

### 自由度计算

df = 类别数 - 1

### p值计算

使用Wilson-Hilferty近似方法将卡方分布转换为正态分布进行计算。

## 示例输出

```
============================================================
CHI-SQUARE GOODNESS-OF-FIT TEST RESULTS
============================================================
Chi-square statistic: 4.6000
Degrees of freedom: 5
P-value: 0.467802
Significance level (α): 0.05
Conclusion: Fail to reject H0

Observed vs Expected Frequencies:
----------------------------------------
Category        Observed        Expected        Difference
----------------------------------------
1               8               10.00           -2.00
2               12              10.00           2.00
3               10              10.00           0.00
4               15              10.00           5.00
5               7               10.00           -3.00
6               8               10.00           -2.00
============================================================
```

## 注意事项

1. 所有频数必须为非负数
2. 期望比例必须和为1.0
3. **期望频数可以为零，但有特殊处理：**
   - 如果期望频数为0且观察频数也为0：对卡方统计量的贡献为0
   - 如果期望频数为0但观察频数不为0：卡方统计量为正无穷（拒绝原假设）
4. 观察频数和期望频数（或比例）的长度必须相同

## 应用场景

- 遗传学：检验观察比例是否符合理论比例
- 质量控制：检验产品缺陷率是否符合标准
- 市场调研：检验消费者偏好是否符合预期分布
- 教育评估：检验考试成绩分布是否符合正态分布
- 骰子/硬币公平性检验

## 作者

AI Assistant - 2025
